(this["webpackJsonpair-quality-monitoring"]=this["webpackJsonpair-quality-monitoring"]||[]).push([[0],{181:function(t,e,a){},182:function(t,e,a){},357:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),r=a(28),i=a.n(r),c=(a(181),a(182),a(85)),s=a(18),d=a(153),u=a.n(d),f=[{dataField:"city",text:"City",sort:!0},{dataField:"aqi",text:"Current AQI",sort:!0},{dataField:"formattedTime",text:"Last seen",sort:!0,sortFunc:function(t,e,a,n,o,r){var i=new Date(o.timestamp),c=new Date(r.timestamp);return i-c>0?-1:i-c<0?1:0}}],l=[{dataField:"formattedTime",order:"desc"}],j=function(t,e){var a={},n=parseInt(t.aqi);return n<=50?a.backgroundColor="#65ff07":50<n&&n<=100?a.backgroundColor="#c1ff07":100<n&&n<=200?a.backgroundColor="#fff907":200<n&&n<=300?a.backgroundColor="#ffa907":300<n&&n<=400?a.backgroundColor="#ff8607":400<n&&(a.backgroundColor="#ff0707"),a},m=a(12),b=function(t){var e=t.data,a=t.setSelectedCity,n={onClick:function(t,e,n){a(e.city)}};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h3",{className:"grid-heading",children:"Air Quality Monitoring"}),Object(m.jsx)(u.a,{keyField:"id",data:e,columns:f,rowEvents:n,rowStyle:j,defaultSorted:l})]})},h=a(359),O=a(363),g=a(168),y=a(169),p=a(68),x=a(171),C=function(t){var e=t.historicalData,a=t.selectedCity,n=e[a];return n?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h3",{className:"chart-heading",children:a}),Object(m.jsxs)(h.a,{width:1e3,height:300,data:n,margin:{top:5,right:30,left:20,bottom:5},children:[Object(m.jsx)(O.a,{strokeDasharray:"3 3"}),Object(m.jsx)(g.a,{dataKey:"formattedTime"}),Object(m.jsx)(y.a,{}),Object(m.jsx)(p.a,{}),Object(m.jsx)(x.a,{type:"monotone",dataKey:"aqi",stroke:"#8884d8"}),Object(m.jsx)(x.a,{type:"monotone",dataKey:"formattedTime",stroke:"#82ca9d"})]})]}):null},k=function(t){var e=Math.floor((new Date-t)/1e3),a=Math.floor(e/31536e3);return a>1?a+" years":(a=Math.floor(e/2592e3))>1?a+" months":(a=Math.floor(e/86400))>1?a+" days":(a=Math.floor(e/3600))>1?a+" hours":(a=Math.floor(e/60))>=1?a+" minutes":Math.floor(e)+" seconds"},v=(a(355),new WebSocket("ws://city-ws.herokuapp.com/")),w=function(){var t=Object(n.useState)([]),e=Object(s.a)(t,2),a=e[0],o=e[1],r=Object(n.useState)({}),i=Object(s.a)(r,2),d=i[0],u=i[1],f=Object(n.useState)(""),l=Object(s.a)(f,2),j=l[0],h=l[1];v.onopen=function(){console.log("Connected")},v.onmessage=function(t){var e=JSON.parse(t.data);e.forEach((function(t){t.aqi=parseFloat(t.aqi).toFixed(2),t.timestamp=(new Date).toString(),t.formattedTime=k(new Date(t.timestamp)),t.key="".concat(t.city)}));var n,r,i=function(t,e){return e.forEach((function(e){var a=e.city,n=e.aqi,o=e.timestamp;t[a]?t[a].push({aqi:n,timestamp:o,formattedTime:k(new Date(o))}):t[a]=[{aqi:n,timestamp:o,formattedTime:k(new Date(o))}]})),t}(Object(c.a)({},d),e);u(i),o((n=e,r="city",a.filter((function(t){return!n.find((function(e){return t[r]===e[r]}))})).concat(n)))},v.onclose=function(){console.log("disconnected")};var O={data:a,setSelectedCity:h},g={historicalData:d,selectedCity:j};return Object(m.jsxs)("div",{children:[Object(m.jsx)(C,Object(c.a)({},g)),Object(m.jsx)(b,Object(c.a)({},O))]})};var F=function(){return Object(m.jsx)("div",{className:"App container-fluid",children:Object(m.jsx)(w,{})})},S=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,365)).then((function(e){var a=e.getCLS,n=e.getFID,o=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),n(t),o(t),r(t),i(t)}))};i.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(F,{})}),document.getElementById("root")),S()}},[[357,1,2]]]);
//# sourceMappingURL=main.1a5e611c.chunk.js.map